{"remainingRequest":"C:\\xampp\\htdocs\\LAB11\\node_modules\\thread-loader\\dist\\cjs.js!C:\\xampp\\htdocs\\LAB11\\node_modules\\babel-loader\\lib\\index.js!C:\\xampp\\htdocs\\LAB11\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\xampp\\htdocs\\LAB11\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\xampp\\htdocs\\LAB11\\src\\views\\Basket.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\xampp\\htdocs\\LAB11\\src\\views\\Basket.vue","mtime":1670159742622},{"path":"C:\\xampp\\htdocs\\LAB11\\babel.config.js","mtime":1669579532000},{"path":"C:\\xampp\\htdocs\\LAB11\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1669898372387},{"path":"C:\\xampp\\htdocs\\LAB11\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1669898366087},{"path":"C:\\xampp\\htdocs\\LAB11\\node_modules\\babel-loader\\lib\\index.js","mtime":1669898373313},{"path":"C:\\xampp\\htdocs\\LAB11\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1669898372387},{"path":"C:\\xampp\\htdocs\\LAB11\\node_modules\\vue-loader\\lib\\index.js","mtime":1669898365627}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6XFx4YW1wcFxcaHRkb2NzXFxMQUIxMVxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWVcXGhlbHBlcnNcXGVzbVxcYXN5bmNUb0dlbmVyYXRvci5qcyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBGb290ZXIgZnJvbSAnQC9jb21wb25lbnRzL0Zvb3Rlci52dWUnOwppbXBvcnQgSGVhZGVyIGZyb20gJ0AvY29tcG9uZW50cy9IZWFkZXIudnVlJzsKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIEZvb3RlcjogRm9vdGVyLAogICAgSGVhZGVyOiBIZWFkZXIKICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB1c2VyOiB7CiAgICAgICAgaWQ6ICcnLAogICAgICAgIG5hbWU6ICcnLAogICAgICAgIGVtYWlsOiAnJywKICAgICAgICBzZXNzaW9uX2lkOiAnJwogICAgICB9LAogICAgICBwcm9kdWN0czogW10sCiAgICAgIHRvdGFsUHJpY2U6IDAsCiAgICAgIHRvdGFsUXVhbnRpdHk6IDAKICAgIH07CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdGhpcy5nZXRQcm9kdWN0cygpOwogICAgdGhpcy5nZXRUb3RhbFByaWNlKCk7CiAgICB0aGlzLmdldFRvdGFsUXVhbnRpdHkoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGNsZWFyQmFza2V0OiBmdW5jdGlvbiBjbGVhckJhc2tldCgpIHsKICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdiYXNrZXQvY2xlYXJCYXNrZXQnKTsKICAgICAgdGhpcy5nZXRQcm9kdWN0cygpOwogICAgICB0aGlzLmdldFRvdGFsUHJpY2UoKTsKICAgICAgdGhpcy5nZXRUb3RhbFF1YW50aXR5KCk7CiAgICB9LAogICAgcGxhY2VPcmRlcjogZnVuY3Rpb24gcGxhY2VPcmRlcigpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIGRhdGE7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgZGF0YSA9IHsKICAgICAgICAgICAgICAgICAgc3RhdHVzX2lkOiAxLAogICAgICAgICAgICAgICAgICB1c2VybmFtZTogX3RoaXMudXNlci5uYW1lLAogICAgICAgICAgICAgICAgICB0b3RhbFByaWNlOiBfdGhpcy50b3RhbFByaWNlLAogICAgICAgICAgICAgICAgICB0b3RhbFF1YW50aXR5OiBfdGhpcy50b3RhbFF1YW50aXR5LAogICAgICAgICAgICAgICAgICBpdGVtczogX3RoaXMucHJvZHVjdHMKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ29yZGVycy9hZGRPcmRlcicsIGRhdGEpOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICBpZiAoIV9jb250ZXh0LnNlbnQpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDc7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF90aGlzLmNsZWFyQmFza2V0KCk7CgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDc7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuJHJvdXRlci5wdXNoKCcvbWVzc2FnZS8zJyk7CgogICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBnZXRQcm9kdWN0czogZnVuY3Rpb24gZ2V0UHJvZHVjdHMoKSB7CiAgICAgIHRoaXMucHJvZHVjdHMgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzWydiYXNrZXQvZ2V0UHJvZHVjdHMnXTsKCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5wcm9kdWN0cy5sZW5ndGg7IGkrKykgewogICAgICAgIHZhciBwcm9kdWN0ID0gdGhpcy4kc3RvcmUuZ2V0dGVyc1sncHJvZHVjdHMvZ2V0UHJvZHVjdCddKHRoaXMucHJvZHVjdHNbaV0uaWQpOwogICAgICAgIHRoaXMucHJvZHVjdHNbaV0uaW1hZ2UgPSBwcm9kdWN0LmltYWdlOwogICAgICAgIHRoaXMucHJvZHVjdHNbaV0ubmFtZSA9IHByb2R1Y3QubmFtZTsKICAgICAgICB0aGlzLnByb2R1Y3RzW2ldLnByaWNlID0gcHJvZHVjdC5wcmljZTsKICAgICAgfQogICAgfSwKICAgIGdldFRvdGFsUHJpY2U6IGZ1bmN0aW9uIGdldFRvdGFsUHJpY2UoKSB7CiAgICAgIHRoaXMudG90YWxQcmljZSA9IDA7CgogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMucHJvZHVjdHMubGVuZ3RoOyBpKyspIHsKICAgICAgICB0aGlzLnRvdGFsUHJpY2UgKz0gcGFyc2VGbG9hdCh0aGlzLnByb2R1Y3RzW2ldLnByaWNlKSAqIHBhcnNlRmxvYXQodGhpcy5wcm9kdWN0c1tpXS5xdWFudGl0eSk7CiAgICAgIH0KICAgIH0sCiAgICBnZXRUb3RhbFF1YW50aXR5OiBmdW5jdGlvbiBnZXRUb3RhbFF1YW50aXR5KCkgewogICAgICB0aGlzLnRvdGFsUXVhbnRpdHkgPSAwOwoKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnByb2R1Y3RzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdGhpcy50b3RhbFF1YW50aXR5ICs9IHBhcnNlSW50KHRoaXMucHJvZHVjdHNbaV0ucXVhbnRpdHkpOwogICAgICB9CiAgICB9LAogICAgcmVtb3ZlOiBmdW5jdGlvbiByZW1vdmUocHJvZHVjdElkKSB7CiAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnYmFza2V0L2RlY3JlbWVudFByb2R1Y3QnLCBwcm9kdWN0SWQpOwogICAgICB0aGlzLnRvdGFsUHJpY2UgLT0gcGFyc2VGbG9hdCh0aGlzLiRzdG9yZS5nZXR0ZXJzWydwcm9kdWN0cy9nZXRQcm9kdWN0J10ocHJvZHVjdElkKS5wcmljZSk7CiAgICAgIHRoaXMudG90YWxRdWFudGl0eS0tOwogICAgfSwKICAgIGFkZDogZnVuY3Rpb24gYWRkKHByb2R1Y3RJZCkgewogICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ2Jhc2tldC9pbmNyZW1lbnRQcm9kdWN0JywgcHJvZHVjdElkKTsKICAgICAgdGhpcy50b3RhbFByaWNlICs9IHBhcnNlRmxvYXQodGhpcy4kc3RvcmUuZ2V0dGVyc1sncHJvZHVjdHMvZ2V0UHJvZHVjdCddKHByb2R1Y3RJZCkucHJpY2UpOwogICAgICB0aGlzLnRvdGFsUXVhbnRpdHkrKzsKICAgIH0sCiAgICBnZXRVc2VyOiBmdW5jdGlvbiBnZXRVc2VyKCkgewogICAgICB0aGlzLnVzZXIgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzWyd1c2VyL2dldFVzZXInXTsKICAgIH0KICB9LAogIGNvbXB1dGVkOiB7CiAgICB1c2VyTG9nZ2VkSW46IGZ1bmN0aW9uIHVzZXJMb2dnZWRJbigpIHsKICAgICAgdGhpcy5nZXRVc2VyKCk7CgogICAgICBmb3IgKHZhciBpIGluIHRoaXMudXNlcikgewogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CgogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["Basket.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div>\r\n    <Header/>\r\n    <br><br><br>\r\n    <div v-if=\"totalQuantity==0\" class=\"text-center\"><h1>Your Basket Is Empty</h1>\r\n      <router-link to=\"/products\">\r\n        <button class=\"btn\"> Keep Exploring</button>\r\n      </router-link>\r\n    </div>\r\n    <div v-else>\r\n      <div v-for=\"product in products\" :key=\"product.id\">\r\n        <div class=\"wrapper\">\r\n          <div class=\"container\">\r\n            <div class=\"row text-center\">\r\n              <img :src=\"'http://localhost/LAB11/public/images/' + product.image\" width=\"10%\" height=\"10%\" alt=\"\"/>\r\n              <h4><strong>{{ product.name }} x{{ product.quantity }} {{ product.price }}$</strong></h4>\r\n              <p style=\"text-align: center;\">\r\n                <button @click=\"remove(product.id)\" class=\"btn\">Remove one</button>\r\n                <button @click=\"add(product.id)\" class=\"btn \">Add Another</button>\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"container\">\r\n        <div class=\"row text-center\">\r\n          <h4><strong>{{ totalQuantity }} Items Total Price:{{ totalPrice }}$</strong></h4>\r\n          <p style=\"text-align: center;\">\r\n            <router-link to=\"/products\">\r\n              <button class=\"btn\"> Keep Exploring</button>\r\n            </router-link>\r\n            <button @click=\"clearBasket()\" class=\"btn\">Empty Basket</button>\r\n            <button v-if=\"userLoggedIn\"  @click=\"placeOrder()\" class=\"btn \">Place Order</button>\r\n            <router-link v-else to=\"/login\">\r\n              <button class=\"btn\"> Login to place order</button>\r\n            </router-link>\r\n          </p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <Footer/>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Footer from '@/components/Footer.vue'\r\nimport Header from '@/components/Header.vue'\r\n\r\nexport default {\r\n  components: {\r\n    Footer,\r\n    Header\r\n  },\r\n  data() {\r\n    return {\r\n      user: {\r\n        id: '',\r\n        name: '',\r\n        email: '',\r\n        session_id: ''\r\n      },\r\n      products: [],\r\n      totalPrice: 0,\r\n      totalQuantity: 0\r\n    }\r\n  },\r\n  mounted() {\r\n    this.getProducts();\r\n    this.getTotalPrice();\r\n    this.getTotalQuantity();\r\n  },\r\n  methods: {\r\n    clearBasket() {\r\n      this.$store.commit('basket/clearBasket')\r\n      this.getProducts();\r\n      this.getTotalPrice();\r\n      this.getTotalQuantity();\r\n    },\r\n    async placeOrder() {\r\n      let data =  {status_id: 1,username: this.user.name, totalPrice: this.totalPrice, totalQuantity: this.totalQuantity, items: this.products};\r\n      if (await this.$store.dispatch('orders/addOrder', data)) {\r\n        this.clearBasket()\r\n        await this.$router.push('/message/3')\r\n      }\r\n    },\r\n    getProducts() {\r\n      this.products = this.$store.getters['basket/getProducts']\r\n      for (let i = 0; i < this.products.length; i++) {\r\n        let product = this.$store.getters['products/getProduct'](this.products[i].id)\r\n        this.products[i].image = product.image;\r\n        this.products[i].name = product.name;\r\n        this.products[i].price = product.price;\r\n      }\r\n    },\r\n    getTotalPrice() {\r\n      this.totalPrice = 0;\r\n      for (let i = 0; i < this.products.length; i++) {\r\n        this.totalPrice += parseFloat(this.products[i].price) * parseFloat(this.products[i].quantity);\r\n      }\r\n    },\r\n    getTotalQuantity() {\r\n      this.totalQuantity = 0;\r\n      for (let i = 0; i < this.products.length; i++) {\r\n        this.totalQuantity += parseInt(this.products[i].quantity);\r\n      }\r\n    },\r\n    remove(productId) {\r\n      this.$store.commit('basket/decrementProduct', productId)\r\n      this.totalPrice -= parseFloat(this.$store.getters['products/getProduct'](productId).price)\r\n      this.totalQuantity--\r\n    },\r\n    add(productId) {\r\n      this.$store.commit('basket/incrementProduct', productId)\r\n      this.totalPrice += parseFloat(this.$store.getters['products/getProduct'](productId).price)\r\n      this.totalQuantity++\r\n    },\r\n    getUser() {\r\n      this.user = this.$store.getters['user/getUser']\r\n    }\r\n  },\r\n  computed: {\r\n    userLoggedIn: function () {\r\n      this.getUser()\r\n      for (let i in this.user) return true\r\n      return false\r\n    }\r\n  },\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n</style>"],"sourceRoot":"src/views"}]}