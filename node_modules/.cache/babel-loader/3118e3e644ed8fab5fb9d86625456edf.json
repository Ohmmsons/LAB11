{"remainingRequest":"C:\\xampp\\htdocs\\LAB11\\node_modules\\thread-loader\\dist\\cjs.js!C:\\xampp\\htdocs\\LAB11\\node_modules\\babel-loader\\lib\\index.js!C:\\xampp\\htdocs\\LAB11\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\xampp\\htdocs\\LAB11\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\xampp\\htdocs\\LAB11\\src\\views\\Basket.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\xampp\\htdocs\\LAB11\\src\\views\\Basket.vue","mtime":1670423422493},{"path":"C:\\xampp\\htdocs\\LAB11\\babel.config.js","mtime":1669803518612},{"path":"C:\\xampp\\htdocs\\LAB11\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1669803741763},{"path":"C:\\xampp\\htdocs\\LAB11\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1669803738729},{"path":"C:\\xampp\\htdocs\\LAB11\\node_modules\\babel-loader\\lib\\index.js","mtime":1669803747522},{"path":"C:\\xampp\\htdocs\\LAB11\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1669803741763},{"path":"C:\\xampp\\htdocs\\LAB11\\node_modules\\vue-loader\\lib\\index.js","mtime":1669803748010}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6XFx4YW1wcFxcaHRkb2NzXFxMQUIxMVxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWVcXGhlbHBlcnNcXGVzbVxcYXN5bmNUb0dlbmVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBGb290ZXIgZnJvbSAnQC9jb21wb25lbnRzL0Zvb3Rlci52dWUnOwppbXBvcnQgSGVhZGVyIGZyb20gJ0AvY29tcG9uZW50cy9IZWFkZXIudnVlJzsKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIEZvb3RlcjogRm9vdGVyLAogICAgSGVhZGVyOiBIZWFkZXIKICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB1c2VyOiB7CiAgICAgICAgaWQ6ICcnLAogICAgICAgIG5hbWU6ICcnLAogICAgICAgIGVtYWlsOiAnJywKICAgICAgICBzZXNzaW9uX2lkOiAnJwogICAgICB9LAogICAgICBwcm9kdWN0czogW10sCiAgICAgIHRvdGFsUHJpY2U6IDAsCiAgICAgIHRvdGFsUXVhbnRpdHk6IDAKICAgIH07CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdGhpcy5nZXRQcm9kdWN0cygpOwogICAgdGhpcy5nZXRUb3RhbFByaWNlKCk7CiAgICB0aGlzLmdldFRvdGFsUXVhbnRpdHkoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGNsZWFyQmFza2V0OiBmdW5jdGlvbiBjbGVhckJhc2tldCgpIHsKICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdiYXNrZXQvY2xlYXJCYXNrZXQnKTsKICAgICAgdGhpcy5nZXRQcm9kdWN0cygpOwogICAgICB0aGlzLmdldFRvdGFsUHJpY2UoKTsKICAgICAgdGhpcy5nZXRUb3RhbFF1YW50aXR5KCk7CiAgICB9LAogICAgcGxhY2VPcmRlcjogZnVuY3Rpb24gcGxhY2VPcmRlcigpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIGRhdGE7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgZGF0YSA9IHsKICAgICAgICAgICAgICAgICAgc3RhdHVzX2lkOiAxLAogICAgICAgICAgICAgICAgICB0b3RhbEFtb3VudDogX3RoaXMudG90YWxQcmljZSwKICAgICAgICAgICAgICAgICAgaXRlbXM6IF90aGlzLnByb2R1Y3RzCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuJHN0b3JlLmRpc3BhdGNoKCdvcmRlcnMvYWRkT3JkZXInLCBkYXRhKTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgaWYgKCFfY29udGV4dC5zZW50KSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA3OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfdGhpcy5jbGVhckJhc2tldCgpOwoKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA3OwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLiRyb3V0ZXIucHVzaCgnL21lc3NhZ2UvMycpOwoKICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgZ2V0UHJvZHVjdHM6IGZ1bmN0aW9uIGdldFByb2R1Y3RzKCkgewogICAgICB0aGlzLnByb2R1Y3RzID0gdGhpcy4kc3RvcmUuZ2V0dGVyc1snYmFza2V0L2dldFByb2R1Y3RzJ107CgogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMucHJvZHVjdHMubGVuZ3RoOyBpKyspIHsKICAgICAgICB2YXIgcHJvZHVjdCA9IHRoaXMuJHN0b3JlLmdldHRlcnNbJ3Byb2R1Y3RzL2dldFByb2R1Y3QnXSh0aGlzLnByb2R1Y3RzW2ldLmlkKTsKICAgICAgICB0aGlzLnByb2R1Y3RzW2ldLmltYWdlID0gcHJvZHVjdC5pbWFnZTsKICAgICAgICB0aGlzLnByb2R1Y3RzW2ldLm5hbWUgPSBwcm9kdWN0Lm5hbWU7CiAgICAgICAgdGhpcy5wcm9kdWN0c1tpXS5wcmljZSA9IHByb2R1Y3QucHJpY2U7CiAgICAgIH0KICAgIH0sCiAgICBnZXRUb3RhbFByaWNlOiBmdW5jdGlvbiBnZXRUb3RhbFByaWNlKCkgewogICAgICB0aGlzLnRvdGFsUHJpY2UgPSAwOwoKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnByb2R1Y3RzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdGhpcy50b3RhbFByaWNlICs9IHBhcnNlRmxvYXQodGhpcy5wcm9kdWN0c1tpXS5wcmljZSkgKiBwYXJzZUZsb2F0KHRoaXMucHJvZHVjdHNbaV0ucXVhbnRpdHkpOwogICAgICB9CiAgICB9LAogICAgZ2V0VG90YWxRdWFudGl0eTogZnVuY3Rpb24gZ2V0VG90YWxRdWFudGl0eSgpIHsKICAgICAgdGhpcy50b3RhbFF1YW50aXR5ID0gMDsKCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5wcm9kdWN0cy5sZW5ndGg7IGkrKykgewogICAgICAgIHRoaXMudG90YWxRdWFudGl0eSArPSBwYXJzZUludCh0aGlzLnByb2R1Y3RzW2ldLnF1YW50aXR5KTsKICAgICAgfQogICAgfSwKICAgIHJlbW92ZTogZnVuY3Rpb24gcmVtb3ZlKHByb2R1Y3RJZCkgewogICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ2Jhc2tldC9kZWNyZW1lbnRQcm9kdWN0JywgcHJvZHVjdElkKTsKICAgICAgdGhpcy50b3RhbFByaWNlIC09IHBhcnNlRmxvYXQodGhpcy4kc3RvcmUuZ2V0dGVyc1sncHJvZHVjdHMvZ2V0UHJvZHVjdCddKHByb2R1Y3RJZCkucHJpY2UpOwogICAgICB0aGlzLnRvdGFsUXVhbnRpdHktLTsKICAgIH0sCiAgICBhZGQ6IGZ1bmN0aW9uIGFkZChwcm9kdWN0SWQpIHsKICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdiYXNrZXQvaW5jcmVtZW50UHJvZHVjdCcsIHByb2R1Y3RJZCk7CiAgICAgIHRoaXMudG90YWxQcmljZSArPSBwYXJzZUZsb2F0KHRoaXMuJHN0b3JlLmdldHRlcnNbJ3Byb2R1Y3RzL2dldFByb2R1Y3QnXShwcm9kdWN0SWQpLnByaWNlKTsKICAgICAgdGhpcy50b3RhbFF1YW50aXR5Kys7CiAgICB9LAogICAgZ2V0VXNlcjogZnVuY3Rpb24gZ2V0VXNlcigpIHsKICAgICAgdGhpcy51c2VyID0gdGhpcy4kc3RvcmUuZ2V0dGVyc1sndXNlci9nZXRVc2VyJ107CiAgICB9CiAgfSwKICBjb21wdXRlZDogewogICAgdXNlckxvZ2dlZEluOiBmdW5jdGlvbiB1c2VyTG9nZ2VkSW4oKSB7CiAgICAgIHRoaXMuZ2V0VXNlcigpOwoKICAgICAgZm9yICh2YXIgaSBpbiB0aGlzLnVzZXIpIHsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQoKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogIH0KfTs="},{"version":3,"sources":["Basket.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div>\r\n    <Header/>\r\n    <br><br><br>\r\n    <div v-if=\"totalQuantity==0\" class=\"text-center\"><h1>Your Basket Is Empty</h1>\r\n      <router-link to=\"/products\">\r\n        <button class=\"btn\"> Keep Exploring</button>\r\n      </router-link>\r\n    </div>\r\n    <div v-else>\r\n      <div v-for=\"product in products\" :key=\"product.id\">\r\n        <div class=\"wrapper\">\r\n          <div class=\"container\">\r\n            <div class=\"row text-center\">\r\n              <img :src=\"'http://localhost/LAB11/public/images/' + product.image\" width=\"10%\" height=\"10%\" alt=\"\"/>\r\n              <h4><strong>{{ product.name }} x{{ product.quantity }} {{ product.price }}$</strong></h4>\r\n              <p style=\"text-align: center;\">\r\n                <button @click=\"remove(product.id)\" class=\"btn\">Remove one</button>\r\n                <button @click=\"add(product.id)\" class=\"btn \">Add Another</button>\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"container\">\r\n        <div class=\"row text-center\">\r\n          <h4><strong>{{ totalQuantity }} Items Total Price:{{ totalPrice }}$</strong></h4>\r\n          <p style=\"text-align: center;\">\r\n            <router-link to=\"/products\">\r\n              <button class=\"btn\"> Keep Exploring</button>\r\n            </router-link>\r\n            <button @click=\"clearBasket()\" class=\"btn\">Empty Basket</button>\r\n            <button v-if=\"userLoggedIn\"  @click=\"placeOrder()\" class=\"btn \">Place Order</button>\r\n            <router-link v-else to=\"/login\">\r\n              <button class=\"btn\"> Login to place order</button>\r\n            </router-link>\r\n          </p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <Footer/>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Footer from '@/components/Footer.vue'\r\nimport Header from '@/components/Header.vue'\r\n\r\nexport default {\r\n  components: {\r\n    Footer,\r\n    Header\r\n  },\r\n  data() {\r\n    return {\r\n      user: {\r\n        id: '',\r\n        name: '',\r\n        email: '',\r\n        session_id: ''\r\n      },\r\n      products: [],\r\n      totalPrice: 0,\r\n      totalQuantity: 0\r\n    }\r\n  },\r\n  mounted() {\r\n    this.getProducts();\r\n    this.getTotalPrice();\r\n    this.getTotalQuantity();\r\n  },\r\n  methods: {\r\n    clearBasket() {\r\n      this.$store.commit('basket/clearBasket')\r\n      this.getProducts();\r\n      this.getTotalPrice();\r\n      this.getTotalQuantity();\r\n    },\r\n    async placeOrder() {\r\n      let data =  {status_id: 1, totalAmount: this.totalPrice, items: this.products};\r\n      if (await this.$store.dispatch('orders/addOrder', data)) {\r\n        this.clearBasket()\r\n        await this.$router.push('/message/3')\r\n      }\r\n    },\r\n    getProducts() {\r\n      this.products = this.$store.getters['basket/getProducts']\r\n      for (let i = 0; i < this.products.length; i++) {\r\n        let product = this.$store.getters['products/getProduct'](this.products[i].id)\r\n        this.products[i].image = product.image;\r\n        this.products[i].name = product.name;\r\n        this.products[i].price = product.price;\r\n      }\r\n    },\r\n    getTotalPrice() {\r\n      this.totalPrice = 0;\r\n      for (let i = 0; i < this.products.length; i++) {\r\n        this.totalPrice += parseFloat(this.products[i].price) * parseFloat(this.products[i].quantity);\r\n      }\r\n    },\r\n    getTotalQuantity() {\r\n      this.totalQuantity = 0;\r\n      for (let i = 0; i < this.products.length; i++) {\r\n        this.totalQuantity += parseInt(this.products[i].quantity);\r\n      }\r\n    },\r\n    remove(productId) {\r\n      this.$store.commit('basket/decrementProduct', productId)\r\n      this.totalPrice -= parseFloat(this.$store.getters['products/getProduct'](productId).price)\r\n      this.totalQuantity--\r\n    },\r\n    add(productId) {\r\n      this.$store.commit('basket/incrementProduct', productId)\r\n      this.totalPrice += parseFloat(this.$store.getters['products/getProduct'](productId).price)\r\n      this.totalQuantity++\r\n    },\r\n    getUser() {\r\n      this.user = this.$store.getters['user/getUser']\r\n    }\r\n  },\r\n  computed: {\r\n    userLoggedIn: function () {\r\n      this.getUser()\r\n      for (let i in this.user) return true\r\n      return false\r\n    }\r\n  },\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n</style>"],"sourceRoot":"src/views"}]}